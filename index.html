<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dark Auth System</title>

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family: 'Segoe UI', sans-serif;
}

body{
    background: linear-gradient(135deg, #141e30, #243b55);
    height:100vh;
    display:flex;
    justify-content:center;
    align-items:center;
}

.container{
    width:380px;
    background: rgba(25, 25, 35, 0.95);
    padding:35px;
    border-radius:16px;
    box-shadow:0 15px 40px rgba(0,0,0,0.6);
    border:1px solid rgba(255,255,255,0.05);
}

h2{
    text-align:center;
    margin-bottom:25px;
    color:#ffffff;
    font-weight:600;
}

input{
    width:100%;
    padding:13px;
    margin:10px 0;
    border:1px solid rgba(255,255,255,0.1);
    border-radius:10px;
    background:#1f1f2e;
    color:white;
    transition:0.3s ease;
}

input::placeholder{
    color:#aaa;
}

input:focus{
    outline:none;
    border-color:#8b5cf6;
    box-shadow:0 0 8px rgba(139,92,246,0.6);
}

button{
    width:100%;
    padding:13px;
    margin-top:12px;
    border:none;
    border-radius:10px;
    cursor:pointer;
    font-weight:600;
    background: linear-gradient(90deg, #8b5cf6, #6366f1);
    color:white;
    transition:0.3s ease;
}

button:hover{
    transform:translateY(-2px);
    box-shadow:0 8px 20px rgba(139,92,246,0.5);
}

.google{
    background:white;
    color:#111;
    margin-top:10px;
}

.google:hover{
    background:#e5e5e5;
}

.link{
    text-align:center;
    margin-top:18px;
    font-size:14px;
    cursor:pointer;
    color:#cbd5e1;
}

.link:hover{
    color:#8b5cf6;
}

.dashboard{
    text-align:center;
    color:white;
}

.dashboard p{
    margin:15px 0;
    color:#cbd5e1;
}

.hidden{
    display:none;
}
</style>
</head>

<body>

<div class="container">

    <!-- SIGN UP -->
    <div id="signupDiv">
        <h2>Create Account</h2>
        <input type="text" id="signupFirstName" placeholder="First Name">
        <input type="text" id="signupLastName" placeholder="Last Name">
        <input type="email" id="signupEmail" placeholder="Email">
        <input type="password" id="signupPassword" placeholder="Password">
        <button id="signupBtn">Sign Up</button>
        <button class="google" id="googleSignUp">Sign Up with Google</button>
        <div class="link" onclick="showLogin()">Already have an account? Log In</div>
    </div>

    <!-- LOGIN -->
    <div id="loginDiv" class="hidden">
        <h2>Login</h2>
        <input type="email" id="loginEmail" placeholder="Email">
        <input type="password" id="loginPassword" placeholder="Password">
        <div class="link" id="forgotPassword">Forgot Password?</div>
        <button id="loginBtn">Log In</button>
        <button class="google" id="googleLogin">Log In with Google</button>
        <div class="link" onclick="showSignup()">Don't have an account? Sign Up</div>
    </div>

    <!-- DASHBOARD -->
    <div id="dashboard" class="hidden dashboard">
        <h2>Welcome</h2>
        <p id="userEmail"></p>
        <button id="logoutBtn">Log Out</button>
    </div>

</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { 
    getAuth, 
    createUserWithEmailAndPassword,
    signInWithEmailAndPassword,
    GoogleAuthProvider,
    signInWithPopup,
    signOut,
    onAuthStateChanged,
    sendPasswordResetEmail,
    updateProfile
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

const firebaseConfig = {
    apiKey: "AIzaSyCE4WOqqapSFvoif_K7euTH7GIidzUq3Fg",
    authDomain: "authsystemassignment.firebaseapp.com",
    projectId: "authsystemassignment",
    storageBucket: "authsystemassignment.firebasestorage.app",
    messagingSenderId: "696784203952",
    appId: "1:696784203952:web:4dc66c1ae13967cdac4b75"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const provider = new GoogleAuthProvider();

// UI Switch
window.showLogin = function(){
    signupDiv.classList.add("hidden");
    loginDiv.classList.remove("hidden");
}

window.showSignup = function(){
    loginDiv.classList.add("hidden");
    signupDiv.classList.remove("hidden");
}

// SIGN UP
signupBtn.onclick = async () => {
    try {
        const userCredential = await createUserWithEmailAndPassword(
            auth,
            signupEmail.value,
            signupPassword.value
        );

        await updateProfile(userCredential.user, {
            displayName: signupFirstName.value + " " + signupLastName.value
        });

        alert("Account created successfully!");
    } catch (error) {
        alert(error.message);
    }
};

// GOOGLE AUTH
googleSignUp.onclick = () => signInWithPopup(auth, provider);
googleLogin.onclick = () => signInWithPopup(auth, provider);

// LOGIN
loginBtn.onclick = () => {
    signInWithEmailAndPassword(auth, loginEmail.value, loginPassword.value)
    .catch(error => alert(error.message));
};

// FORGOT PASSWORD
forgotPassword.onclick = () => {
    if(loginEmail.value === ""){
        alert("Enter your email first.");
        return;
    }

    sendPasswordResetEmail(auth, loginEmail.value)
    .then(() => alert("Password reset email sent!"))
    .catch(error => alert(error.message));
};

// LOGOUT
logoutBtn.onclick = () => signOut(auth);

// AUTH STATE LISTENER
onAuthStateChanged(auth, (user) => {
    if(user){
        signupDiv.classList.add("hidden");
        loginDiv.classList.add("hidden");
        dashboard.classList.remove("hidden");

        userEmail.innerText = user.displayName
            ? user.displayName + " (" + user.email + ")"
            : user.email;
    } else {
        dashboard.classList.add("hidden");
        signupDiv.classList.remove("hidden");
    }
});
</script>

</body>
</html>